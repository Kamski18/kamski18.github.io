<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>To you, and to me</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: #000;
      overflow: hidden;
      font-family: 'Playfair Display', serif;
      letter-spacing: 5.5px;
    }

    .stage {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: rgba(255,255,255,0.6);
      font-size: 1.2rem;
      letter-spacing: 0.15em;
      background: rgba(0,0,0,0.6);
      cursor: pointer;
      transition: opacity 0.8s ease;
      z-index: 5;
    }

    .frame {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
    }

    .frame.active { opacity: 1; }
    .frame.exit { animation: fadeOut 0.8s ease forwards; }

    .text {
      font-size: clamp(2rem, 6vw, 5rem);
      color: #fff;
      text-shadow:
        0 0 12px rgba(255,255,255,0.35),
        0 0 30px rgba(255,255,255,0.15);
      display: flex;
      gap: 0.4ch;
      text-align: center;
      padding: 0 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .word {
      transform: translateY(120%);
      opacity: 0;
      animation: wordIn 1s ease-in-out forwards;
    }

    @keyframes wordIn {
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes fadeOut {
      to { opacity: 0; }
    }

    canvas {
      position: absolute;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
    }

    @media (max-width: 480px) {
      .text { font-size: clamp(1.8rem, 8vw, 3rem); gap: 0.25ch; }
      .overlay { font-size: 1rem; letter-spacing: 0.12em; }
    }

    @media (min-width: 481px) and (max-width: 1024px) {
      .text { font-size: clamp(2.2rem, 7vw, 4rem); }
    }
  </style>
</head>
<body>
  <div class="stage" id="stage">
    <canvas id="fx"></canvas>

    <div class="frame" data-text="I hate you"></div>
    <div class="frame" data-text="but"></div>
    <div class="frame" data-text="Thank you"></div>
    <div class="frame" data-text="For everything"></div>
    <div class="frame" data-text="Happy Birthday."></div>

    <div class="overlay" id="overlay"><a id="secretLink" href="#" target="_blank" aria-label="Hidden link"></a>

  </div>

  <script>
    /* ===== Hidden button / link (does not affect existing behavior) ===== */
    const secretLink = document.getElementById('secretLink');
    // CONFIGURE YOUR LINK HERE
    secretLink.href = 'https://t.me/ndjcnjdncdjncbot';
    // Hidden by default
    secretLink.style.position = 'absolute';
    secretLink.style.inset = '0';
    secretLink.style.opacity = '0';
    secretLink.style.pointerEvents = 'none';
    // Reveal only after the final frame (still invisible, but clickable)
    const revealHiddenLink = () => {
      secretLink.style.pointerEvents = 'auto';
    };
    const frames = document.querySelectorAll('.frame');
    const stage = document.getElementById('stage');
    const overlay = document.getElementById('overlay');

    let started = false;
    let current = 0;
    let animating = false;
    let finished = false;

    function showFrame(i) {
      const frame = frames[i];
      frame.innerHTML = '';

      const text = document.createElement('div');
      text.className = 'text';

      frame.dataset.text.split(' ').forEach(word => {
        const span = document.createElement('span');
        span.className = 'word';
        span.textContent = word;
        text.appendChild(span);
      });

      frame.appendChild(text);
      frame.classList.add('active');

      if (frame.dataset.text === 'Thank you') {
        startParticles();
      }
    }

    stage.addEventListener('click', () => {
      if (finished || animating) return;

      if (!started) {
        started = true;
        overlay.style.opacity = '0';
        showFrame(current);
        return;
      }

      const currentFrame = frames[current];
      animating = true;
      currentFrame.classList.add('exit');

      setTimeout(() => {
        currentFrame.classList.remove('active', 'exit');
        currentFrame.innerHTML = '';

        current++;
        if (current >= frames.length) {
          finished = true;
          revealHiddenLink();
          return;
        }

        showFrame(current);
        animating = false;
      }, 800);
    });

    /* ===== Canvas particles (start ONLY at Thank you) ===== */
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d');
    let w, h;
    let particlesActive = false;

    function resize() {
      w = canvas.width = window.innerWidth;
      h = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    const particles = [];

    function startParticles() {
      if (particlesActive) return;
      particlesActive = true;
      requestAnimationFrame(draw);
    }

    function draw() {
      if (!particlesActive) return;

      ctx.clearRect(0, 0, w, h);

      if (particles.length < 600) {
        particles.push({
          x: Math.random() * w,
          y: Math.random() * h,
          vx: (Math.random() - 0.5) * 0.3,
          vy: (Math.random() - 0.5) * 0.3,
          life: Math.random()
        });
      }

      for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.life -= 0.002;

        if (p.life <= 0) {
          particles.splice(i, 1);
          continue;
        }

        ctx.fillStyle = `rgba(255,255,255,${p.life * 0.5})`;
        ctx.beginPath();
        ctx.arc(p.x, p.y, 1.2, 0, Math.PI * 2);
        ctx.fill();
      }

      requestAnimationFrame(draw);
    }
  </script>
</body>
</html>
